---
title: nmap的使用
tags:
  - nmap
categories: Programming
date: 2017-02-23 13:43:26
---

#### 安装

```shell
# 在Ubuntu下安装
sudo apt install nmap -y
# 安装图形界面
sudo apt install zenmap -y
```

#### 端口掃描

默認的端口掃描只掃描常用的1000個端口，如果需要掃描所有端口，使用如下命令：

```shell
nmap -p 1-65535 -A 192.168.1.12
nmap -p- -A 192.168.1.12
```

-A包含OS 探测，版本探测，脚本扫描，traceroute。

#### 查看指定端口的状态

有时我们想查看服务器具体的某一个端口是否UP，可以通过扫描实现。但是还有一种更加节省时间的方法，例如想查看凤凰网的80端口是否开启，可以输入如下命令：

<!-- more -->

```Bash
nmap -p 80 ifeng.com
```

结果可以立即出来，这样可以节省不少时间。p参数用于监控指定端口。

#### 隐藏身份

当我们在用nmap扫描时，一般情况下不建议直接扫描，直接扫描会暴露自己的IP，如果需要隐藏身份，可以有如下方法：

* 伪造访问的IP地址
* 对发送信息进行处理
* 风险进行嫁接
* 其他

##### 诱饵扫描

诱饵扫描的工作原理时伪造大量的IP与自己的IP一并去访问网站，从而混淆判断。扫描的命令如下所示：

#### 应用示例

假设主机的IP是192.168.1.2，一些扫描示例如下：

```Bash
# A参数表示启动OS和版本侦测、脚本扫描等，T4参数表示快速执行
nmap -A -T4 192.168.1.2
# 操作系统侦测,O表示Operation System
sudo nmap -O 192.168.1.2
```
<<<<<<< HEAD
#### GUI

```shell
# 在Fedora下安装Zenmap客户端
rpm -vhU https://nmap.org/dist/zenmap-7.40-1.noarch.rpm
```
=======

#### 加強安全手段

##### 關閉不使用的服務

計算機對外暴露的端口越多，承擔的安全風險越大。暴露80端口會遭遇DDoS攻擊。如果沒有使用相應的服務，最好將之關閉。使用nmap經常會掃描到111端口開啓，如果您没有挂载 NFSv3 卷或者使用 NIS（`ypbind` 服务），则应该禁用 `rpcbind`服務。RPC即Remote Procedure Call Protocol（远程过程调用协议），RPCBIND用于取代旧版本中的portmap组件。 简单说，RPCBIND就是为了将不同服务与对应的端口进行绑定，以便支持机器间的互操作。

##### 安全常識

某些网络协议本身就比其它协议更不安全。这些协议包含一些服务：

- *以不加密的方式在网络中传输用户名和密码* — 很多老的协议，比如 Telnet 和 FTP，它们对认证会话都不加密，应尽量避免使用。
- *以不加密方式传输敏感数据* — 很多协议在网络间传输数据时不加密。这些协议包括 Telent、FTP、HTTP 和 SMTP。很多网络文件系统，比如 NFS 和 SMB 也以不加密的方式在网络间传输信息。用户在使用这些协议时有责任限制要传输的数据类型。

本身就不安全的服务示例包括 `rlogin`、`rsh`、 `telnet`、以及`vsftpd`。

>>>>>>> a34635dd6d8a285e6d56b47b2aa2f1b9c6997826
